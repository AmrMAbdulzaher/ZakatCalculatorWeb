const e={a:document.getElementById("cash"),b:document.getElementById("trading_goods"),c:document.getElementById("debts"),d:document.getElementById("liabilities"),e:document.getElementById("gold_price"),f:document.getElementById("total_zakat"),g:document.getElementById("nisab"),h:document.getElementById("zakat_amount"),i:document.getElementById("hijri"),j:document.getElementById("miladi")};let t=2.5;const n=[e.a,e.b,e.c,e.d],o=[e.e];function a(){if(""!=e.a.value||""!=e.b.value||""!=e.c.value||""!=e.d.value){return((parseFloat(s(e.a.value))||0)+(parseFloat(s(e.b.value))||0)+(parseFloat(s(e.c.value))||0)-(parseFloat(s(e.d.value))||0)).toFixed(2)}return""}function l(){const t=parseFloat(s(e.e.value))||0;return""!=e.e.value?(85*t).toFixed(2):""}function i(n,o){if(""!=e.f.value&&""!=e.g.value){const e=parseFloat(n);return e>=parseFloat(o)?(e*t/100).toFixed(2):"لا زكاة - وعاء الزكاة لم يبلغ النصاب"}return""}function d(e){let t="object"==typeof e?e.value:e;const n=t.startsWith("-");t=t.replace(/[^0-9.]/g,"");const o=t.split(".");o[0]=o[0].replace(/\B(?=(\d{3})+(?!\d))/g,",");const a=(n?"-":"")+o.join(".");return"object"==typeof e&&(e.value=a),a}function s(e){return e.replace(/,/g,"")}function c(t){let n=t.value;const o={"٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9"};n=n.replace(/[٠-٩]/g,(e=>o[e])),n=n.replace(/[^0-9.]/g,"");const a=n.split(".");a.length>2&&(n=a[0]+"."+a.slice(1).join("")),t!==e.e?a.length>1&&a[1].length>2&&(n=a[0]+"."+a[1].slice(0,2)):a.length>1&&a[1].length>5&&(n=a[0]+"."+a[1].slice(0,5));parseFloat(n)>1e15&&(n=n.slice(0,-1)),t.value=n}function u(){Object.values(e).forEach((e=>{"INPUT"===e.tagName&&"text"===e.type&&(e.value="")})),e.i.checked=!0,t=2.5}function r(e){var t=document.getElementById("tipModal"),n=document.getElementById("modalText"),o={tip1:{title:"ركز في نيتك عند إخراج الأموال\nوفَرِّق بين النذر والصدقة والزكاة",content:"1- النذر: ما نذرته لله وكفارته ككفارة اليمين.\n2- الصدقة: في أي وقت لأي شخص غني أو فقير.\n3- الزكاة: عند بلوغ المال النصاب ومرور الحول ولها مصارفها ولا تسقط بالتقادم بل تعود لحسابها ولو بشكل تقديري قدر المستطاع وتخرجها حسب المتاح معك من سيولة خلال العام."},tip2:{title:"مصارف الزكاة",content:"1- الفقراء: من لا يجد شيء.\n2- المساكين: الذي يجد بعض ما يكفيه.\n3- العاملين عليها: المكلف بجبايتها وتوزيعها.\n4- المؤلفة قلوبهم: من دخل في الإسلام وكان في حاجة إلى تأليف قلبه.\n5- الرقاب: عتق المسلم عبدًا كان أو أمة، و فك الأسرى ومساعدة المكاتبين.\n6- الغارمين: من استدان في غير معصية وليس عنده سداد دينه، ومن غرم في صلحٍ مشروع.\n7- في سبيل الله: المجاهدين والمرابطين في سبيل الله.\n8- ابن السبيل: مسافر أنقطعت به الأسباب عن بلده وماله فيعان على الرجوع لبلده بما يحتاج."}};modalTitle.textContent=o[e].title,n.textContent=o[e].content,t.style.display="block"}function m(){document.getElementById("tipModal").style.display="none"}function g(){window.scrollBy({top:-window.innerHeight,left:0,behavior:"smooth"}),h()}function v(){window.scrollBy({top:window.innerHeight,left:0,behavior:"smooth"}),h()}function h(){var e=document.getElementById("scrollUpBtn"),t=document.getElementById("scrollDownBtn");const n=document.body.scrollHeight-window.innerHeight;0===window.scrollY?e.classList.add("hidden"):e.classList.remove("hidden"),Math.ceil(window.scrollY)>=n?t.classList.add("hidden"):t.classList.remove("hidden")}n.forEach((t=>{t.addEventListener("input",(function(){c(t),d(t);const n=a(),o=l(),s=""!==n?d(n):"";if(e.f.value!==s&&(e.f.value=s,e.f.classList.add("readonly-updated"),setTimeout((()=>e.f.classList.remove("readonly-updated")),1e3)),""!=e.f.value&&""!=e.g.value){const t=i(n,o);e.h.value=t>=0?d(t):t}}))})),o.forEach((t=>{t.addEventListener("input",(function(){c(t),d(t);const n=l(),o=""!==n?d(n):"";e.g.value!==o&&(e.g.value=o,e.g.classList.add("readonly-updated"),setTimeout((()=>e.g.classList.remove("readonly-updated")),1e3));const s=a();if(""!=e.f.value&&""!=e.g.value){const t=i(s,n);e.h.value=t>=0?d(t):t}}))})),e.i.addEventListener("change",(function(){if(e.i.checked){t=2.5;const n=a(),o=l();if(n&&o){const t=i(n,o);e.h.value=t>=0?d(t):t}}})),e.j.addEventListener("change",(function(){if(e.j.checked){t=2.577;const n=a(),o=l();if(n&&o){const t=i(n,o);e.h.value=t>=0?d(t):t}}})),window.onload=h,window.onscroll=h;