(()=>{const e={cash:document.getElementById("cash"),tradingGoods:document.getElementById("trading_goods"),debts:document.getElementById("debts"),liabilities:document.getElementById("liabilities"),goldPrice:document.getElementById("gold_price"),totalMoney:document.getElementById("total_zakat"),nisab:document.getElementById("nisab"),zakatAmount:document.getElementById("zakat_amount"),hijri:document.getElementById("hijri"),miladi:document.getElementById("miladi")};let t=2.5;const n=[e.cash,e.tradingGoods,e.debts,e.liabilities],a=[e.goldPrice];function o(){if(""!=e.cash.value||""!=e.tradingGoods.value||""!=e.debts.value||""!=e.liabilities.value){return((parseFloat(s(e.cash.value))||0)+(parseFloat(s(e.tradingGoods.value))||0)+(parseFloat(s(e.debts.value))||0)-(parseFloat(s(e.liabilities.value))||0)).toFixed(2)}return""}function l(){const t=parseFloat(s(e.goldPrice.value))||0;return""!=e.goldPrice.value?(85*t).toFixed(2):""}function i(n,a){if(""!=e.totalMoney.value&&""!=e.nisab.value){const e=parseFloat(n);return e>=parseFloat(a)?(e*t/100).toFixed(2):"لا زكاة - وعاء الزكاة لم يبلغ النصاب"}return""}function d(e){let t="object"==typeof e?e.value:e;const n=t.startsWith("-");t=t.replace(/[^0-9.]/g,"");const a=t.split(".");a[0]=a[0].replace(/\B(?=(\d{3})+(?!\d))/g,",");const o=(n?"-":"")+a.join(".");return"object"==typeof e&&(e.value=o),o}function s(e){return e.replace(/,/g,"")}function c(t){let n=t.value;const a={"٠":"0","١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9"};n=n.replace(/[٠-٩]/g,(e=>a[e])),n=n.replace(/[^0-9.]/g,"");const o=n.split(".");o.length>2&&(n=o[0]+"."+o.slice(1).join("")),t!==e.goldPrice?o.length>1&&o[1].length>2&&(n=o[0]+"."+o[1].slice(0,2)):o.length>1&&o[1].length>5&&(n=o[0]+"."+o[1].slice(0,5));parseFloat(n)>1e15&&(n=n.slice(0,-1)),t.value=n}function u(){var e=document.getElementById("scrollUpBtn"),t=document.getElementById("scrollDownBtn");const n=document.body.scrollHeight-window.innerHeight;0===window.scrollY?e.classList.add("hidden"):e.classList.remove("hidden"),Math.ceil(window.scrollY)>=n?t.classList.add("hidden"):t.classList.remove("hidden")}n.forEach((t=>{t.addEventListener("input",(function(){c(t),d(t);const n=o(),a=l(),s=""!==n?d(n):"";if(e.totalMoney.value!==s&&(e.totalMoney.value=s,e.totalMoney.classList.add("readonly-updated"),setTimeout((()=>e.totalMoney.classList.remove("readonly-updated")),1e3)),""!=e.totalMoney.value&&""!=e.nisab.value){const t=i(n,a);e.zakatAmount.value=t>=0?d(t):t}}))})),a.forEach((t=>{t.addEventListener("input",(function(){c(t),d(t);const n=l(),a=""!==n?d(n):"";e.nisab.value!==a&&(e.nisab.value=a,e.nisab.classList.add("readonly-updated"),setTimeout((()=>e.nisab.classList.remove("readonly-updated")),1e3));const s=o();if(""!=e.totalMoney.value&&""!=e.nisab.value){const t=i(s,n);e.zakatAmount.value=t>=0?d(t):t}}))})),e.hijri.addEventListener("change",(function(){if(e.hijri.checked){t=2.5;const n=o(),a=l();if(n&&a){const t=i(n,a);e.zakatAmount.value=t>=0?d(t):t}}})),e.miladi.addEventListener("change",(function(){if(e.miladi.checked){t=2.577;const n=o(),a=l();if(n&&a){const t=i(n,a);e.zakatAmount.value=t>=0?d(t):t}}})),window.onload=u,window.onscroll=u})();